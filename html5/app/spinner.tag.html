<spinner style="display: flex; align-items: center; justify-content: center;">
	<div ref="spinner" if="{isLoading}" class="spinner hidden">

	</div>

	<style>
		.spinner {
			z-index: 99;
			height: 188px;
			width: 188px;
			-webkit-animation: rotation .4s infinite linear;
			-moz-animation: rotation .4s infinite linear;
			-o-animation: rotation .4s infinite linear;
			animation: rotation .4s infinite linear;
			border-left: 32px solid rgba(140, 25, 179, .25);
			border-right: 32px solid rgba(140, 25, 179, .25);
			border-bottom: 32px solid rgba(140, 25, 179, .25);
			border-top: 32px solid rgba(140, 25, 179, .75);
			border-radius: 100%;
		}

		@-webkit-keyframes rotation {
			from {
				-webkit-transform: rotate(0deg);
			}
			to {
				-webkit-transform: rotate(359deg);
			}
		}

		@-moz-keyframes rotation {
			from {
				-moz-transform: rotate(0deg);
			}
			to {
				-moz-transform: rotate(359deg);
			}
		}

		@-o-keyframes rotation {
			from {
				-o-transform: rotate(0deg);
			}
			to {
				-o-transform: rotate(359deg);
			}
		}

		@keyframes rotation {
			from {
				transform: rotate(0deg);
			}
			to {
				transform: rotate(359deg);
			}
		}
	</style>

	<script>
		this.mixin(ObservableMixin)
		var self = this
		this.delay = this.opts.delay ? this.opts.delay : 0
		this.isLoading = false
		let root = document.getElementById("root")

		this.observable.on(LOADING_IN_PROGRESS, function (opts) {
			self.isLoading = true
			self.update()
			setTimeout(function () {
				if (self.isLoading) {
					root.style.opacity = "0.3"
					self.refs.spinner.classList.remove("hidden")
				}
			}, 1000)
		})
		this.observable.on(LOADING_DONE, function () {
			self.isLoading = false
			root.style.opacity = "1"
			self.update()
		})
	</script>

</spinner>