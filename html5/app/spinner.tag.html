<spinner style="display: flex; align-items: center; justify-content: center;">
	<div ref="spinner" if="{isLoading}" class="spinner hidden">
		<div class="rect1"></div>
		<div class="rect2"></div>
		<div class="rect3"></div>
		<div class="rect4"></div>
		<div class="rect5"></div>
	</div>

	<style>
		.spinner {
			width: 150px;
			height: 190px;
			text-align: center;
			font-size: 16px;
		}

		.spinner>div {
			background-color: #8C19B3;
			height: 100%;
			width: 12px;
			display: inline-block;

			-webkit-animation: sk-stretchdelay 1s infinite ease-in-out;
			animation: sk-stretchdelay 1s infinite ease-in-out;
		}

		.spinner .rect2 {
			-webkit-animation-delay: -0.9s;
			animation-delay: -0.9s;
		}

		.spinner .rect3 {
			-webkit-animation-delay: -0.8s;
			animation-delay: -0.8s;
		}

		.spinner .rect4 {
			-webkit-animation-delay: -0.7s;
			animation-delay: -0.7s;
		}

		.spinner .rect5 {
			-webkit-animation-delay: -0.6s;
			animation-delay: -0.6s;
		}

		@-webkit-keyframes sk-stretchdelay {
			0%, 40%, 100% {
				-webkit-transform: scaleY(0.3)
			}
			20% {
				-webkit-transform: scaleY(1.0)
			}
		}

		@keyframes sk-stretchdelay {
			0%, 40%, 100% {
				transform: scaleY(0.3);
				-webkit-transform: scaleY(0.3);
			}
			20% {
				transform: scaleY(1.0);
				-webkit-transform: scaleY(1.0);
			}
		}
	</style>

	<script>
		this.mixin(ObservableMixin)
		var self = this
		this.delay = this.opts.delay ? this.opts.delay : 0
		this.isLoading = false

		this.observable.on(LOADING_IN_PROGRESS, function (opts) {
			self.isLoading = true
			self.update()
			setTimeout(function () {
				if (self.isLoading) {
					root.style.opacity = "0.3"
					self.refs.spinner.classList.remove("hidden")
				}
			}, 1000)
		})
		this.observable.on(LOADING_DONE, function () {
			self.isLoading = false
			root.style.opacity = "1"
			self.update()
		})
	</script>

</spinner>