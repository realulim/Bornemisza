<server-chart>

    <section class="panel">
        <p class="panel-heading">
            Application Servers
        </p>
        <div class="panel-block" style="display: flex; flex-direction: column;">
            <div class="ct-chart ct-perfect-fifth">
            </div>
    </section>

    <style>
        .panel-heading {
            background-color: #E5E4E2;
            border-color: grey;
            border-radius: 5px 5px 0px 0px;
        }

        .panel-block {
            background-color: whitesmoke;
            border-color: grey;
            border-radius: 0px 0px 5px 5px;
        }

        .ct-label {
            font-size: 1em;
            color: var(--dark);
        }
        .ct-bar {
            stroke-width: 60px;
        }
        @media screen and (max-width: 1600px) {
            .ct-bar {
                stroke-width: 50px;
            }
        }
        @media screen and (max-width: 1199px) {
            .ct-bar {
                stroke-width: 40px;
            }
        }
        @media screen and (max-width: 900px) {
            .ct-bar {
                stroke-width: 30px;
            }
        }
        @media screen and (max-width: 768px) {
            .ct-bar {
                stroke-width: 80px;
            }
        }
        @media screen and (max-width: 720px) {
            .ct-bar {
                stroke-width: 70px;
            }
        }
        @media screen and (max-width: 680px) {
            .ct-bar {
                stroke-width: 60px;
            }
        }
        @media screen and (max-width: 620px) {
            .ct-bar {
                stroke-width: 50px;
            }
        }
        @media screen and (max-width: 500px) {
            .ct-bar {
                stroke-width: 45px;
            }
        }
        @media screen and (max-width: 450px) {
            .ct-bar {
                stroke-width: 40px;
            }
        }
        @media screen and (max-width: 400px) {
            .ct-bar {
                stroke-width: 30px;
            }
        }

        .ct-series-a .ct-bar {
            stroke: lightseagreen;
        }
        .ct-series-b .ct-bar {
            stroke: crimson;
        }
        .ct-series-c .ct-bar {
            stroke: gold;
        }
        .ct-series-d .ct-bar {
            stroke: royalblue;
        }
        .ct-series-e .ct-bar {
            stroke: lightsalmon;
        }
    </style>

    <script>
        this.mixin(ObservableMixin)
        var self = this
        var serverChart = null

        this.on("mount", function () {
            var script = document.createElement("script");
            script.onload = function () {
                var link = document.createElement("link")
                link.rel = "stylesheet"
                link.onload = function () {
                    console.log("Everything loaded.")
                }
                link.href = "https://cdnjs.cloudflare.com/ajax/libs/chartist/0.11.0/chartist.min.css"
                document.head.appendChild(link)
            }
            script.src = "https://cdnjs.cloudflare.com/ajax/libs/chartist/0.11.0/chartist.min.js"
            document.body.appendChild(script)
        })

        this.observable.on(UPDATE_APPSERVERS_CHART, function (opts) {
            if (self.serverChart == null) {
                // create a new Chart and configure it
                self.serverChart = new Chartist.Bar('.ct-chart', opts.data,
                    {
                        seriesBarDistance: 119,
                        axisX: {
                            showGrid: false,
                            offset: 20
                        },
                        axisY: {
                            scaleMinSpace: 50
                        }
                    }
                    , [
                    // responsive Option Overrides
                    ['screen and (max-width: 1280px)', {
                        seriesBarDistance: 80
                    }],
                    ['screen and (max-width: 1200px)', {
                        seriesBarDistance: 73
                    }],
                    ['screen and (max-width: 1100px)', {
                        seriesBarDistance: 65
                    }],
                    ['screen and (max-width: 1024px)', {
                        seriesBarDistance: 58
                    }],
                    ['screen and (max-width: 968px)', {
                        seriesBarDistance: 53
                    }],
                    ['screen and (max-width: 900px)', {
                        seriesBarDistance: 48
                    }],
                    ['screen and (max-width: 840px)', {
                        seriesBarDistance: 43
                    }],
                    ['screen and (max-width: 790px)', {
                        seriesBarDistance: 39
                    }],
                    ['screen and (max-width: 768px)', {
                        seriesBarDistance: 123
                    }],
                    ['screen and (max-width: 720px)', {
                        seriesBarDistance: 113
                    }],
                    ['screen and (max-width: 680px)', {
                        seriesBarDistance: 106
                    }],
                    ['screen and (max-width: 640px)', {
                        seriesBarDistance: 98
                    }],
                    ['screen and (max-width: 640px)', {
                        seriesBarDistance: 93
                    }],
                    ['screen and (max-width: 590px)', {
                        seriesBarDistance: 87
                    }],
                    ['screen and (max-width: 560px)', {
                        seriesBarDistance: 82
                    }],
                    ['screen and (max-width: 530px)', {
                        seriesBarDistance: 76
                    }],
                    ['screen and (max-width: 500px)', {
                        seriesBarDistance: 70
                    }],
                    ['screen and (max-width: 480px)', {
                        seriesBarDistance: 65
                    }],
                    ['screen and (max-width: 450px)', {
                        seriesBarDistance: 59
                    }],
                    ['screen and (max-width: 400px)', {
                        seriesBarDistance: 49
                    }]
                ]

                    )
            }
            else self.serverChart.update(opts.data)
        })
    </script>

</server-chart>