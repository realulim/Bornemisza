<main>
    <h1 class="title">Main Page</h1>
    <div class="subtitle">Hello {user}</div>
    <div if="{justMarried}" class="is-size-6 msg msg-good fade-in-out">
        Authenticated
        <a onclick="{hideAllMessages}" class="delete is-small msg-good-close"></a>
    </div>

    <script>
        var self = this
        this.mixin(ObservableMixin)
        this.user = (typeof opts.user === "undefined" ? "Nobody" : opts.user)
        this.justMarried = false

        this.observable.on(JUST_MARRIED, function (opts) {
            self.justMarried = true
            self.update()
            setTimeout(function () {
                self.justMarried = false
                self.update()
            }, 5000)
        })

        this.on('mount', function () {
            console.log("Loading User Data for " + self.user)
        })

        this.hideAllMessages = () => {
            this.justMarried = false
            this.update()
        }
    </script>
</main>